<script src="/socket.io/socket.io.js"></script>
<script>
    io = io.connect()

    // Emit ready event.
    io.emit('player:register',{
                name: "rafikplayer",
                entities:[],
                game_id: "game1",
                webmana: 20
              });


    // result : event : entity:add, {result : true, name ; rafikentity}


    io.on('player:register',function(data){
        console.log("player:register" + JSON.stringify(data));
    })


    io.emit('entity:add',{name:"rafikentity",
        x:10,
        y:20,
        is_serverp : true,
        is_goodp : false,
        aptitudes :[],
        vulnerabilities:[],
        webmana:5,
        his_player_id:"rafikplayer"
    });

    io.on('entity:add',function(data) {
            console.log("entity add:" + JSON.stringify(data));
        })

    io.emit('entity:move',{his_player_id :'rafikplayer',
        name:'rafikentity',
        x:10, y:15})

    io.on('entity:move', function(data) {
        console.log("entity move:" + JSON.stringify((data)));


    })

    io.emit('entity:list_aptitudes',{target_player_id:'rafikplayer',target_entity_id:'rafikentity'})
    io.on('entity:list_aptitudes',function(data){
        console.log("entity:list_aptitudes"+JSON.stringify(data));
    });

    io.emit('entity:list_vulnerabilities',{target_player_id:'rafikplayer',target_entity_id:'rafikentity'})
    io.on('entity:list_vulnerabilities',function(data){
        console.log("entity:list_vulnerabilities"+JSON.stringify(data));
    });

    io.emit('entity:buy_aptitude', {his_player_id:'rafikplayer', his_entity_id:'rafikentity',aptitude_id:'buy_stuff'});
    io.on('entity:buy_aptitude', function(data) {
        console.log("entiry:buy_aptitudes"+JSON.stringify(data));
    })

</script>